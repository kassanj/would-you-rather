<div class="container">
  <div class="card">
    <div class="card-header">
      <h3>Coupons</h3>
    </div>
    <div class="card-block">
      <table class="table table-hover table-striped">
        <thead class="thead-default">
        <tr>
          <th>Code</th>
          <th>Percentage</th>
          <th>Notes</th>
          <th>Redemptions</th>
          <th>Validation Period</th>
          <th>Status</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @coupons.each do |coupon| %>
          <tr>
            <td><%= coupon.code %></td>
            <td><%= coupon.amount %>%</td>
            <td><%= coupon.description %></td>
            <td><%= CouponRedemption.where(coupon_id: coupon).length %> / <%= coupon.redemption_limit %></td>
            <td><%= coupon.valid_from.strftime('%b %d, %Y') %> - <%= coupon.valid_until.strftime('%b %d, %Y') %></td>
            <% if coupon.redeemable? == true %>
              <td><span class="badge badge-pill badge-success">Redeemable</span></td>
            <% else %>
              <td><span class="badge badge-pill badge-danger">Not Redeemable</span></td>
            <% end %>
            <td><%= link_to 'Show', coupon %></td>
            <td><%= link_to '', edit_coupon_path(coupon), class: 'icon-pencil' %></td>
            <td><%= link_to '', coupon, method: :delete, class: 'icon-close', data: { confirm: 'Are you sure?' } %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    </div>
  </div>  <%= link_to 'New Coupon', new_coupon_path, class: "btn btn-primary", style: "float: right; margin-top: 2px; max-width: 150px" %>
</div>